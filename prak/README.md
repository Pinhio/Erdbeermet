# Instructions for pipeline usage

The pipeline processes a defined amount of iterations.
Each iteration carries out at least one simulation and one recognition as specified in Erdbeermet.

## pipeline definition
The pipeline is specified by the following parameters:

```python
def pipeline(...):
    '''
    size: simulation matrix size (list or int)
    iterations: number of iterations performed for each passed size
    first_four_simulation: first four leafs
    circular: parameter passed into simulation to genereate circular matrix
    clocklike: parameter passed into simulation to genereate clocklike distances
    first_candidate_only: terminates regocnition when first valid candidate has been found
    block_leaves: initiates blocking of first 3 resp. 4 leaves of generation. These leaves won't be considered in recognition as candidates.
    choose_smallest_spike: only considers candidates with smallest spikes for recognition
    pdf_error: show pdf trees if true
    print_fail: write additional debug-information for each iteration to file
    print_info: parameter passed into recognition algorithm to print out info
    '''
```

## pipeline output
The pipeline generates 3 different kinds of output and stores them in the /prak/sim_outputs folder.
For different kinds of settings, subfolders are created:
cc = circular AND clocklike | cnc = circular AND NOT clocklike | ncc = NOT circular AND clocklike | ncnc = NOT circular AND NOT clocklike

* sim_ouputs
    * cc
        * hist_files_1
            * hist_of_fail_1.txt
            * hist_of_fail_2.txt
            * ...
        * hist_files_2
            * ...
        * pdf_of_fail_1.pdf
        * pdf_of_fail_2.pdf
        * ...
        * txt_summary_1.txt
        * txt_summary_2.txt
        * ...
    * cnc
    * ncc
    * ncnc

Each generated folder or file starts with a shortcut of the workpackage it belongs to. (WP1, WP3 or WP4)
Additionally every file and folder belonging to the same run have a unix timestamp in the naming to avoid overriding.

### txt_summary
Here the parameters used for the run are saved.
If print_fail is set to true, the history of failed recognitions is also saved.
Lastly, overall statistics are saved at the end of the file.

Overall statistics cover (in this order):
* total runtime
* avg runtime
* avg divergence of reconstructed steps from true steps of the simulation
* number of cases where original 4 leaves of simulation were detected correctly
* number of failed recognitions
* number of detected circles

### hist_of_fail
Is a history file, that enables to repeat a recognition on a certain simulation.
The history file is generated by a method from `Erdbeermet`

### pdf_of_fail
Is a PDF output as generated by `Erdbeermet`.
An additional identifier for the matrix size is given at the end of the naming.
